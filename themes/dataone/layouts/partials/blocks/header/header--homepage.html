<!-- in order to pass on page parameters from within loops -->
{{ $page := .Page }}
<!-- blockname  -->
{{ $bn := "header" }}

{{ $tagline := .Block.tagline | default "Data Observation Network for Earth" }}

{{ $bkgImg := "" }}
{{ $src := .Block.image }}
{{ with $src }}
  {{ $bkgImg = printf ` style="--background-image:url('%s');"` . | safeHTMLAttr  }}
{{ end }}

<header class="header header--hero-image header--overlay-subtle header--homepage" {{ $bkgImg }}>
  <div class="header__content">
    <div class="header__logo">

      {{- partial "blocks/logo/logo" (dict "Block" (dict "type" "homepage") "Page" $page ) -}}
    </div>
    {{ with $tagline}}
      <div class="header__tagline">
        {{ $tagline }}
      </div>
    {{ end }}
    <div class="header__search">
      {{- partial "blocks/d1search/d1search" (dict "Block" .Block "Page" $page ) -}}
    </div>

    <!-- Parameters for the advanced search button -->
    {{ $buttonParams := dict "type" "external website" "external_link" "https://search.dataone.org/data" "text" "Advanced search" "color" "quaternary" }}

    {{ partial "blocks/button/button" (dict "Block" $buttonParams "Page" $page )}}
  </div>

  <div class="{{ $bn }}__logos">
  <!-- Logos -->
  {{ $buttonBlock := dict "type" "internal page" "color" "quaternary" "text" "See our entire network" "internal_link" "/network/_index.md" }}
  {{ $logosBlock := slice }}
  {{ $logosBlock = $logosBlock | append ( dict "name" "CyVerse" "logo" "/uploads/member_node_logos/cyverse.png" ) }}
  {{ $logosBlock = $logosBlock | append ( dict "name" "Global Biodiversity Information Facility" "logo" "/uploads/member_node_logos/gbif.png" ) }}
  {{ $logosBlock = $logosBlock | append ( dict "name" "Global Lake Ecological Observatory Network (GLEON)" "logo" "/uploads/member_node_logos/gleon.png" ) }}
  {{ $logosBlock = $logosBlock | append ( dict "name" "ORNL DAAC" "logo" "/uploads/member_node_logos/ornldaac.png" ) }}
  {{ $logosBlock = $logosBlock | append ( dict "name" "University of Kansas - Biodiversity Institute" "logo" "/uploads/member_node_logos/kubi.png" ) }}
  {{ $logosBarBlock := dict "button" $buttonBlock "logos" $logosBlock "style" "dark-background" }}
  <!-- double it -->
  {{ $logosBlock = $logosBlock | append ( dict "name" "CyVerse" "logo" "/uploads/member_node_logos/cyverse.png" ) }}
  {{ $logosBlock = $logosBlock | append ( dict "name" "Global Biodiversity Information Facility" "logo" "/uploads/member_node_logos/gbif.png" ) }}
  {{ $logosBlock = $logosBlock | append ( dict "name" "Global Lake Ecological Observatory Network (GLEON)" "logo" "/uploads/member_node_logos/gleon.png" ) }}
  {{ $logosBlock = $logosBlock | append ( dict "name" "ORNL DAAC" "logo" "/uploads/member_node_logos/ornldaac.png" ) }}
  {{ $logosBlock = $logosBlock | append ( dict "name" "University of Kansas - Biodiversity Institute" "logo" "/uploads/member_node_logos/kubi.png" ) }}
  {{ $logosBarBlock := dict "button" $buttonBlock "logos" $logosBlock "style" "dark-background" }}
  {{ partial "blocks/logos-bar/logos-bar" (dict "Block" $logosBarBlock "Page" $page) }}
</div>

</header>
