.menu-item {

  // ==========================================================================
  //    Variables
  // ==========================================================================

  // Allow the block's base class to be used at all scopes within the block.
  // (bn = block name), use as: #{$bn}. 
  $bn                            : &;
  // Use the block's base class as a variable prefix (remove class selector . )
  $prefix                        : "--" + str-replace(#{$bn}, ".");

  // Variables specific to this block, based on varibles set at higher scope
  // (e.g. .section), such that blocks can be themed from a higher level.
  // The value may change in modified blocks or elements (i.e. block--modifier).
  // Always use css variables along with a default value to maintain the block's
  // independence & modularity (a la BEM).

  // #{$prefix}-c-accent : var( , );
  // 
  #{$prefix}-fc-hover            : var(--c-minor-accent, grey);
  #{$prefix}-c-menu-background   : var(--c-default-lighter, white);
  #{$prefix}-fc-sub-link         : var(--c-foreground-on-default, gray);
  #{$prefix}-c-foreground-on-dark: var(--c-foreground-on-always-dark, white);

  // ==========================================================================
  //    Styles
  // ==========================================================================

  @include f-common;
  text-align                     : center;
  height                         : auto;
  display                        : block;
  position                       : relative;
  @include desktop {
    margin: .3rem .15rem;
    height: calc(100% - .6rem);
  }

  &:hover {
    #{$bn}__dropdown-icon {
      stroke    : var(#{$prefix}-fc-hover);
      transition: stroke .1s 0s ease-in-out;
    }

    #{$bn}__dropdown-button,
    #{$bn}__link {
      color     : var(#{$prefix}-fc-hover);
      transition: color .1s 0s ease-in-out;
    }
  }

  &__dropdown-icon {
    stroke    : $icon-color;
    margin-top: -2px;
    position  : relative;
    padding   : 0 .2rem;
  }

  &__dropdown-button,
  &__link {
    @include button-reset;
    text-decoration: none;
    color          : var(#{$prefix}-c-foreground-on-dark);
    white-space    : nowrap;
    width          : 100%;
    display        : block;
    font-size      : var(--fs-medium, 1.1rem);
    font-weight    : var(--fw-bold, 500);
    line-height    : 3.3125rem;
    letter-spacing : .03em;
    @include desktop {
      padding    : 0 .62rem;
      font-size  : var(--fs-medium, 1.1rem);
      height     : 100%;
      line-height: normal;
      display    : flex;
      align-items: center;
    }
  }
  // link when item is active
  &--active {
    #{$bn}__link {
      color      : white;
      font-weight: var(--fw-x-bold, 800);
    }
  }

  &__sub-menu {
    padding-inline-start: 0;
    transition          : max-height .25s 0s ease-in-out, opacity .15s 0s ease-in-out;
    @include desktop {
      position        : absolute;
      background-color: var(#{$prefix}-c-menu-background);
      display         : block;
      border-radius   : var(--br-default, 0.25rem);
      box-shadow      : -1px 1px 7px -1px rgba(82,95,127,.11);
      // center the menu
      transform       : translate(-50%, 0);
      left            : 50%;
      padding         : 1rem 1.75rem;
    }
    // closed
    max-height          : 0;
    overflow            : hidden;
    opacity             : 0;
    visibility          : hidden;
    // open
    &[aria-hidden="false"] {
      height    : auto;
      max-height: 1000px;
      opacity   : 1;
      visibility: visible;
      // submenu arrow when menu is open
      & ~ #{$bn}__sub-menu-arrow {
        @include desktop {
          bottom           : -5px;
          transform        : translate(-50%, 0);
          left             : 50%;
          position         : absolute;
          margin           : 0 0 0 -6px;
          width            : 12px;
          height           : 12px;
          -webkit-transform: rotate(45deg);
          transform        : rotate(45deg);
          border-radius    : var(--br-default, 0.25rem) 0 0 0;
          box-shadow       : -3px -3px 5px rgba(82,95,127,.05);
          opacity          : 1;
        }
      }
    }
  }

  &__sub-menu-arrow {
    opacity   : 0;
    transition: opacity .2s 0s ease-in-out;
    background: var(#{$prefix}-c-menu-background);
  }

  &__sub-link {
    margin         : 0;
    font-size      : var(--fs-medium, 1.1rem);
    line-height    : 1.5;
    text-transform : uppercase;
    font-weight    : var(--fw-bold, 500);
    letter-spacing : .03em;
    display        : block;
    text-decoration: none;
    color          : var(#{$prefix}-c-foreground-on-dark);
    white-space    : nowrap;
    padding        : .5rem 0;

    &--active {
      color      : white;
      font-weight: var(--fw-bold, 500);
    }
    @include desktop {
      color: var(#{$prefix}-fc-sub-link);

      &:hover {
        color      : var(#{$prefix}-fc-hover);
        transition : color .1s 0s ease-in-out;
        font-weight: var(--fw-bold, 500);
      }

      &--active {
        font-weight: var(--fw-bold, 500);
      }
    }
  }

  &__sub-item {
    text-align: center;
    height    : auto;
    display   : block;
    position  : relative;
    @include desktop {
      margin: 5px 2px;
      height: auto;
    }
  }

  &--dataone-plus-ad {
    .dataone-plus-logo {
      margin-right: 3px;
      fill        : white;
      height      : 15px;
      width       : 18px;
    }

    &:hover {
      .dataone-plus-logo {
        fill: var(#{$prefix}-fc-hover);
      }
    }

    .pill {
      margin-left: 3px;
    }

    #{$bn}__sub-menu {
      background-image: radial-gradient(#14A2A7 0%, #0E8E9A 18%, #1E628A 67%, #1B435D 100%);
    }

    #{$bn}__sub-menu-arrow {
      background-color: #20628A;
    }
  }

}
