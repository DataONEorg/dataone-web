{{- define "main" -}}
  <header>
    <span class="pill">Coming 2020</span>
    <h1 class="sectionTitle">{{ .Params.pageTitle | markdownify }}</h1>
    <p>{{ .Params.introText | markdownify }}</p>
    <div class="cta-contianer">
      {{- with .Params.ctajoin -}}
        {{- partial "components/cta-button" (dict "level" "primary" "ctalink" (print $.RelPermalink "#" $.Site.Params.joinFormId) "ctatext" .ctatext) -}}
      {{- end -}}
      {{- with .Params.ctacontact -}}
        {{- partial "components/cta-button" (dict "level" "primary" "ctalink" $.Site.Params.contactLink "ctatext" .ctatext) -}}
      {{- end -}}
    </div>
  </header>

  <!-- Portals section -->
  {{- with .Params.portals -}}
  <section class="portals">
    <div>{{ .icon }}</div>
    <h2>{{ .title | markdownify }}</h2>
    <p>{{ .intro | markdownify }}</p>
    <figure>{{ .figure }}</figure>
    {{- with .features }}
    <div class="features-minis-list">
      {{- range . -}}
        {{- if and .headline .text -}}
          {{- partial "components/feature-mini" . -}}
        {{- end -}}
      {{- end -}}
    </div>
    {{- end -}}
  </section>
  {{- end -}}

  <!-- FAIR section -->
  {{- with .Params.fair -}}
    {{- partial "components/feature-fair" . -}}
  {{- end -}}

  <!-- Access experts section -->
  {{- with .Params.accessExperts -}}
  <section class="access-experts">
    <div>{{- .icon -}}</div>
    <h2>{{- .title | markdownify -}}</h2>
    <p>{{- .intro | markdownify -}}</p>
    {{- with .features -}}
    <section class="feature-minis">
      {{- range . -}}
        {{- if and .headline .text -}}
          {{- partial "components/feature-mini" . -}}
        {{- end -}}
      {{- end -}}
    </section>
    {{- end -}}
  </section>
  {{- end -}}

  <!-- Hosted repo section -->
  {{- with .Params.hostedRepo -}}
  <section class="hosted-repo">
    <figure>{{- .figure -}}</figure>
    <h2><span>{{- .titletop | markdownify -}}</span> <em>{{- .titlebottom | markdownify -}}</em></h2>
    <p>{{- .intro | markdownify -}}</p>
    {{- with .cta -}}
      {{- partial "components/cta-button" . -}}
    {{- end -}}
  </section>
  {{- end -}}

  <!-- JOIN form -->
  {{- with .Params.joinForm -}}
    {{- partial "components/join-form" (dict "id" $.Site.Params.joinFormId "title" .title "text" .text "pageType" $.Page.Type) -}}
  {{- end -}}

{{- end -}}
